var traloi1 = ["·ªé , l·ªánh c·ªßa m√¨nh l√†: !",
  "B·∫°n g·ªçi m√¨nh c√≥ vi·ªác g√¨ kh√¥ng?",
  "m√¨nh r·∫•t s·∫µn l√≤ng khi ƒë∆∞·ª£c ph·ª•c v·ª• b·∫°n:3",
  "M√¨nh l√† bot , r·∫•t vui ƒë∆∞·ª£c b·∫°n ch√∫ √Ω t·ªõi:3",
  "B·∫°n tag m√¨nh c√≥ g√¨ kh√¥ng?",
  "Facebook admin: facebook.com/TatsuYTB",
  "N·∫øu c√≥ vi·ªác g√¨ th√¨ th√¨ li√™n h·ªá admin nh√©:3",
  "Trong tr∆∞·ªùng h·ª£p bot kh√¥ng onl th√¨ nh·∫Øn tin v·ªõi admin qua fb: facebook.com/TatsuYTB",
  "C√≥ v·∫•n ƒë·ªÅ g√¨ th√¨ h√£y ib admin",
  "Mua file bot ib m√¨nh: facebook.com/TatsuYTB",
  "Bao ph√≤ng ch·ª•y ƒëi b√© ∆°i",
  "Anh y√™u em<3",
  "Ch·ªãt ƒëi:33",
  "Anh bao ph√≤ng b√© nha?",
  "B·ªë m·∫π em kh√¥ng c√≥ nh√†=))",
  "Bi·∫øt ch√†o t√¥i kh√¥ng? ƒë·ªì t·ªá b·∫°c ",
  "Anh ƒë·ª´ng l√†m v·∫≠y!!!!!!",
  "Bi·∫øt ·ªìn l·∫Øm kh√¥ng h·∫£?",
  "kh√¥ng bi·∫øt im l·∫≠ng √†aa-.-",
  "·ªín √†o qu√° ƒëi im l·∫∑ng h·∫øt, v·ªÅ nh√† m√† c√£i nhau!",
  "Kh√¥ng th·ªÉ c·∫£n ƒë∆∞·ª£c b∆∞·ªõc c·ªßa ma g√™m minh",
  "c√πng √Ω ch√≠ sinh t·ªìn ƒë·∫øn say bu da ƒëi b√™n ƒë·ªìng ƒë·ªôi hai ba s√¥ng pha",
  "kh√¥ng ƒë∆∞·ª£c l√†m v·∫≠y n·ªØa nghe, m·∫π bi·∫øt m·∫π b√πn ƒë√≥",
   "Troi oi cuu toi co thang no doi hiep toi",
   "Cuu be:<",
    "c√°c ng∆∞·ªùi b·∫Øt n·∫°t ta huhu",
     "C√≥ g√¨ kh√¥ng b√¢y bi?",
               "reply nhi·ªÅu qu√° d·ªÖ g√¢y tho√°i h√≥a ƒë√≥",
               "500k bao ph√≤ng ha?",
               "Tr·∫£ l·∫°i s·ª± trong s·∫°ch cho taoooo",
               "sao may muon cai gi?",
               "may mu·ªën c√°i g√¨ t·ª´ taoooo",
               "t·∫°i sao d·ªã",
               "sao con n√≥i d·ªã",
               "d·ª´ng, d·ª´ng l·∫°i √° √°",
               "cuu toi, n√≥ ƒë√≤i hiep toi ne ba con oi",
               "sao c·∫≠u l√†m th·∫ø v·ªõi t·ªõ? bi·∫øt √°c l·∫Øm kh√¥ng h·∫£",
               "ƒë√∫t v√†o ƒëi c·∫≠u",
               "m√¨nh ch·ªãu ƒë∆∞·ª£c m√†, m·∫°nh l√™n c·∫≠u",
               "sao c·∫≠u y·∫øu th·∫ø",
               "g√¨ c√≥ 1phut ƒë√£ ra r·ªìi, c·∫≠u b·ªã y·∫øu √†=))?",
               "c·∫≠u y·∫øu x√¨u d·ªã",
               "ƒë·ªì 30s",
               "y·∫øu=))",
               "sao c·∫≠u l·∫°i l√†m v·∫≠y v·ªõi t·ªõ",
               "c·∫≠u th·∫≠t ƒë·ªôc √°c",
               "Y√™u em <3", 
               "Em l√† con bot cute nh·∫•t <3", 
               "ch√†o b·∫°n t√¥i l√† bot", 
               "b·∫°n g·ªçi t√¥i c√≥ vi·ªác g√¨?", 
               "t√¥i y√™u b·∫°n vai lon", 
               "Y√™u em <3", 
               "Hi, chaÃÄo con v∆°Ã£ beÃÅ:3",
               "Ch·ªìng goÃ£i coÃÅ vi·ªác giÃÄ kh√¥ng?", 
               "S∆∞Ãâ duÃ£ng callad ƒë√™Ãâ li√™n laÃ£c v∆°ÃÅi admin!", 
               "Em l√† bot cute nh·∫•t h√†nh tinh", 
               "N√≥i g√¨ th·∫ø con l·ª£n", 
               "Em ƒë√¢y~~~~", 
               "Y√™u anh  nh·∫•tüíü", 
               "Y√™u th∆∞∆°ng admin nh·∫•t",
               "Anh ·∫•y l√† ph·ª• tr·ª£ c·ªßa admin",
               "Sao th·∫ø c√¥ng ch√∫a", 
               "ChƒÉm ch·ªâ h·ªçc h√†nh ƒëi",
               "Bae ƒÉn c∆°m ch∆∞a?", 
               "Tuy·ªÉn phi c√¥ng n√® ·∫°",
               "L√†m ƒëƒ© kh√¥ng ·∫°? dui l·∫Øm", 
               "N·∫øu c·∫≠u ƒëang c√¥ ƒë∆°n th√¨ ch√∫ng ta c√≥ th·ªÉ th√†nh ƒë√¥i :3", 
               "ƒêang l√†m g√¨ v·∫≠y?", 
               "ƒê∆∞·ª£c c·ªßa l√≥ :)))", 
               "Em dthw nh∆∞ ch·ªß c·ªßa em ·∫°", 
               "ƒê·ª´ng khen em ng·∫°i qu√° h√≠ h√≠" ,
               "L√†m ch·ªìng em kh√¥ng ·∫°?", 
                "C√∫t ra", 
               "C√¥ng ch√∫a em sao ƒë·∫•y?", 
               "C√≥ g√¨ ƒÉn kh√¥ng:(( ƒë√≥i qu√°aa", 
               "Y√™u c·∫≠u nh∆∞ m·ªôt c·ª±c h√¨nh\nNh·∫•p l√™n nh·∫•p xu·ªëng hai m√¨nh c√πng r√™n", 
               "Spam cc c√∫t", 
               "Y√™u em kh√¥ng?", 
               "Ch·ªìng em ƒë√¢y r·ªìi", 
               "M√†y b·ªã l√†m sao √≠@@", 
               "B·∫°n l√† nh·∫•t!!!", 
               "K√™u chi l·∫Øm th·∫ø? B·ªô th√≠ch tao r·ªìi √† :v", 
               "Ch·∫ßn ch·ªù g√¨ ch·ªìng ∆°i em ƒë√¢yyy", 
               "Ch·∫ßn ch·ªù g√¨ v·ª£ ∆°i anh ƒë√¢yyy", 
               "Em... Sao em l·∫°i n√≥i nh·ªØng c√°i l·ªùi ƒë√≥ chi zay em?", 
               "Th·∫ßy d·∫°y ph·ªù ri m√†aa", 
               "Yeu em rat nhieu ^^", 
               "ƒê·ªì con l·ª£n l√πn :))", 
               "ƒê·ª£i x√≠. ƒêi ·∫ª c√°i :()", 
               "500k bao ph√≤ng!!!", 
               "Yeu anh den luy ^^", 
               "Anh qu√°t em √†?\nN√≥i to th·∫ø √°?",
               "Tr·∫£ qu·∫ßn cho em huhu", 
               "Baby, take my hand. I want you to be my husband. Cause you're my Iron Man. And I love you 3000 <3", 
                "cccccccccccccccccccc", 
               "ƒê·ª´ng qu√° y√™u m·ªôt ai ƒë√≥, khi ch√≠nh b·∫£n th√¢n b·∫°n v·∫´n b·ªã t·ªïn th∆∞∆°ng!", "Bae, em nhu bong hoa. Nhung nguoi hai dau phai ta üíî", 
                "H√£y g·ªçi cho admin t√¥i ƒë·ªÉ ƒë∆∞·ª£c y√™u th∆∞∆°ng<3", 
               "H√°t ƒëi cho k·∫πo üç≠"
];

var traloi2 = [
];

var traloi3 = [
  'abc',
  'xyz'
  //tr·∫£ l·ªùi b·∫±ng reply b·∫±ng c√°i g√¨ th√¨ t√πy thu·ªôc v√†o b·∫°n
];

var phrases = [
  'hello bot',
  'hi bot',
  'hey bot',
  'bot'
];

var phrases1 = [
  'jqk'
  //n·∫øu n·ªôi dung ƒë·∫ßu v√†o b·∫±ng c√°i g√¨ th√¨ t√πy thu·ªôc v√†o b·∫°n
];

function checkForSpecificPhrases(message, phrases) {
  for (let phrase of phrases) {
    if (message.toLowerCase().includes(phrase)) {
      return true; 
    }
  }
  return false;
}

function tagg() {
  var index = Math.floor(Math.random() * traloi1.length);
  return traloi1[index];
}

function replyy() {
  var index = Math.floor(Math.random() * traloi2.length);
  return traloi2[index];
}

function replyy3() {
  var index = Math.floor(Math.random() * traloi3.length);
  return traloi3[index];
}

const fs = require('fs');
const path = './commandStatus.json';

module.exports.config = {
  name: "reply",
  version: "4.0.0",
  hasPermssion: 3,
  credits: "Vtuan",//thay cre edit t·ªôi m√¨nh l·∫Øm b ∆°i
  description: "C·∫•u h√¨nh c√¢u tr·∫£ l·ªùi t·ª± ƒë·ªông",
  commandCategory: "H·ªá Th·ªëng",
  usages: "[on/off]",
  cooldowns: 5,
};
const { exec } = require('child_process');
module.exports.handleEvent = async function({ api, event,Users }) {
  if (event.senderID == api.getCurrentUserID()) return;
  const cmdStatus = JSON.parse(fs.readFileSync(path));
  const mentionedUserIds = Object.keys(event.mentions);
  const isBotMentioned = mentionedUserIds.includes(String(api.getCurrentUserID()));
  const isBotReplied = event.messageReply && event.messageReply.senderID == api.getCurrentUserID();
  const isSpecificPhrase = checkForSpecificPhrases(event.body, phrases);
  const isSpecificPhrase1 = checkForSpecificPhrases(event.body, phrases1);
  if (event.senderID == api.getCurrentUserID()) return;
  if(cmdStatus[this.config.name]) {
    if(isBotMentioned || isSpecificPhrase) {
      api.sendMessage(tagg(), event.threadID, event.messageID);
    }
    if(isSpecificPhrase1) {
      api.sendMessage(replyy3(), event.threadID, event.messageID);
    }
    if(isBotReplied) {
      api.sendMessage(replyy(), event.threadID, event.messageID);
    }
  }
};

module.exports.run = async function ({api, event, args}) {
  if(!fs.existsSync(path)) fs.writeFileSync(path, JSON.stringify({}));
  const commandStatus = JSON.parse(fs.readFileSync(path, 'utf-8'));
  switch (args[0]) {
    case "on":
      commandStatus[this.config.name] = true;
      api.sendMessage("ƒê√£ b·∫≠t ch·ª©c nƒÉng!", event.threadID);
      break;
    case "off":
      commandStatus[this.config.name] = false;
      api.sendMessage("ƒê√£ t·∫Øt ch·ª©c nƒÉng!", event.threadID);
      break;
    default:
      api.sendMessage("B·∫°n c·∫ßn th√™m 'on' ho·∫∑c 'off' sau l·ªánh.", event.threadID, event.messageID);
  }
  fs.writeFileSync(path, JSON.stringify(commandStatus, null, 2));
};
